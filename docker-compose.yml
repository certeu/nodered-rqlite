version: '3'
services:
  rqlite:
    image: rqlite/rqlite:latest
    ports:
      - "5001:4001"  # Expose rqlite's HTTP API
    environment:
      - JOIN=localhost:4001  # Join an existing rqlite cluster (if applicable)

  nodered:
    image: nodered/node-red:latest
    ports:
      - "1880:1880"  # Expose Node-RED's UI
    volumes:
      - ./rqlite-storage.js:/data/rqlite-storage.js
      - ./settings.js:/data/settings.js  # Custom settings if needed
    depends_on:
      - rqlite